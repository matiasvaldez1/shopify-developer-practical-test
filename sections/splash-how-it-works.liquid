{{ 'splash-how-it-works.css' | asset_url | stylesheet_tag }}

<section class="splash-how-it-works" style="min-height: {{ section.settings.section_height }}px;">
  <!-- Header Section -->
  <div class="splash-how-it-works__header">
    <div class="splash-container">
      {% if section.settings.heading != blank %}
        <h2 class="splash-heading">{{ section.settings.heading }}</h2>
      {% endif %}
      
      {% if section.settings.description != blank %}
        <p class="splash-description">{{ section.settings.description }}</p>
      {% endif %}
    </div>
  </div>

  <!-- Options Cards Section -->
  <div class="splash-how-it-works__options">
    <div class="splash-container">
      <div class="splash-options-grid">
        {% for block in section.blocks %}
          {% case block.type %}
            {% when 'option_card' %}
              <div class="splash-option-card {% if block.settings.card_style == 'highlighted' %}splash-option-card--highlighted{% endif %}" {{ block.shopify_attributes }}>
                {% if block.settings.show_icon %}
                  <div class="splash-option-card__icon">
                    {% case block.settings.icon_type %}
                      {% when 'wine-bottles' %}
                        <svg width="60" height="60" viewBox="0 0 60 60" fill="none">
                          <rect x="10" y="15" width="8" height="30" rx="4" fill="currentColor"/>
                          <rect x="26" y="10" width="8" height="35" rx="4" fill="currentColor"/>
                          <rect x="42" y="20" width="8" height="25" rx="4" fill="currentColor"/>
                        </svg>
                      {% when 'box' %}
                        <svg width="60" height="60" viewBox="0 0 60 60" fill="none">
                          <rect x="15" y="20" width="30" height="25" rx="2" stroke="currentColor" stroke-width="2" fill="none"/>
                          <rect x="20" y="15" width="20" height="5" rx="1" fill="currentColor"/>
                          <path d="M15 30 L30 20 L45 30" stroke="currentColor" stroke-width="2" fill="none"/>
                          <path d="M15 35 L30 25 L45 35" stroke="currentColor" stroke-width="2" fill="none"/>
                        </svg>
                      {% when 'custom' %}
                        {% if block.settings.custom_icon != blank %}
                          {{ block.settings.custom_icon | image_url: width: 60 | image_tag: loading: 'lazy', alt: 'Icon' }}
                        {% endif %}
                    {% endcase %}
                  </div>
                {% endif %}
                
                <div class="splash-option-card__content">
                  {% if block.settings.card_text != blank %}
                    <p class="splash-option-card__text">{{ block.settings.card_text }}</p>
                  {% endif %}
                  
                  {% if block.settings.link_text != blank and block.settings.link_url != blank %}
                    <a href="{{ block.settings.link_url }}" class="splash-option-card__link">
                      {{ block.settings.link_text }}
                      <svg width="16" height="16" viewBox="0 0 16 16" fill="none">
                        <path d="M6 12L10 8L6 4" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                      </svg>
                    </a>
                  {% endif %}
                </div>
              </div>
          {% endcase %}
        {% endfor %}
      </div>
    </div>
  </div>

  <!-- Wine Club Section -->
  {% for block in section.blocks %}
    {% case block.type %}
      {% when 'wine_club' %}
        <div class="splash-wine-club" {{ block.shopify_attributes }}>
          <div class="splash-container">
            <div class="splash-wine-club__wrapper">
              {% if block.settings.show_illustration %}
                <div class="splash-wine-club__image">
                  {% if block.settings.custom_image != blank %}
                    {{ block.settings.custom_image | image_url: width: 200 | image_tag: loading: 'lazy', alt: 'Wine Club' }}
                  {% else %}
                    <svg width="120" height="140" viewBox="0 0 120 140" fill="none">
                      <ellipse cx="60" cy="120" rx="45" ry="15" fill="#E8D5E8" opacity="0.6"/>
                      <path d="M35 60 Q35 45 50 45 Q65 45 65 60 L65 100 Q65 115 50 115 Q35 115 35 100 Z" fill="#D2691E"/>
                      <rect x="45" y="35" width="10" height="15" rx="2" fill="#8B4513"/>
                    </svg>
                  {% endif %}
                </div>
              {% endif %}
              
              <div class="splash-wine-club__content">
                {% if block.settings.club_heading != blank %}
                  <h3 class="splash-wine-club__heading">{{ block.settings.club_heading }}</h3>
                {% endif %}
                
                {% if block.settings.club_description != blank %}
                  <p class="splash-wine-club__description">{{ block.settings.club_description }}</p>
                {% endif %}
                
                {% if block.settings.button_text != blank and block.settings.button_url != blank %}
                  <a href="{{ block.settings.button_url }}" class="splash-wine-club__button">{{ block.settings.button_text }}</a>
                {% endif %}
              </div>
            </div>
          </div>
        </div>
    {% endcase %}
  {% endfor %}
</section>

{% schema %}
{
  "name": "How Splash Works",
  "tag": "section",
  "class": "section",
  "settings": [
    {
      "type": "range",
      "id": "section_height",
      "min": 300,
      "max": 800,
      "step": 50,
      "unit": "px",
      "label": "Minimum Section Height",
      "default": 500
    },
    {
      "type": "text",
      "id": "heading",
      "label": "Section Heading",
      "default": "How Splash Works"
    },
    {
      "type": "textarea",
      "id": "description",
      "label": "Section Description",
      "default": "Splash is about you. That means we work hard to provide an amazing selection of wine at the best values. Never any obligation or auto-enrollment, simply choose the option that is best for you."
    }
  ],
  "blocks": [
    {
      "type": "option_card",
      "name": "Option Card",
      "settings": [
        {
          "type": "select",
          "id": "card_style",
          "label": "Card Style",
          "options": [
            {
              "value": "default",
              "label": "Default (White)"
            },
            {
              "value": "highlighted",
              "label": "Highlighted (Green)"
            }
          ],
          "default": "default"
        },
        {
          "type": "checkbox",
          "id": "show_icon",
          "label": "Show Icon",
          "default": true
        },
        {
          "type": "select",
          "id": "icon_type",
          "label": "Icon Type",
          "options": [
            {
              "value": "wine-bottles",
              "label": "Wine Bottles"
            },
            {
              "value": "box",
              "label": "Box"
            },
            {
              "value": "custom",
              "label": "Custom Image"
            }
          ],
          "default": "wine-bottles"
        },
        {
          "type": "image_picker",
          "id": "custom_icon",
          "label": "Custom Icon Image",
          "info": "Only used when Icon Type is set to Custom"
        },
        {
          "type": "textarea",
          "id": "card_text",
          "label": "Card Text",
          "default": "With plenty of options, expertly selected, our curated cases are perfect for exploring new wines."
        },
        {
          "type": "text",
          "id": "link_text",
          "label": "Link Text",
          "default": "Shop Curated Cases"
        },
        {
          "type": "url",
          "id": "link_url",
          "label": "Link URL"
        }
      ]
    },
    {
      "type": "wine_club",
      "name": "Wine Club Section",
      "settings": [
        {
          "type": "checkbox",
          "id": "show_illustration",
          "label": "Show Illustration",
          "default": true
        },
        {
          "type": "image_picker",
          "id": "custom_image",
          "label": "Custom Image",
          "info": "Leave blank to use default wine glass illustration"
        },
        {
          "type": "text",
          "id": "club_heading",
          "label": "Wine Club Heading",
          "default": "Join Our Wine Club"
        },
        {
          "type": "textarea",
          "id": "club_description",
          "label": "Wine Club Description",
          "default": "At Splash, subscribing to regular shipments is a benefit - you get consistently great prices and you are totally in control. As an added bonus, if you subscribe today, you'll get $20 off your first shipment - just use the code SUBSCRIBE at checkout! That means you that can get 15 bottles for just $69 + FREE Shipping - our best ever price!"
        },
        {
          "type": "text",
          "id": "button_text",
          "label": "Button Text",
          "default": "Learn More"
        },
        {
          "type": "url",
          "id": "button_url",
          "label": "Button URL"
        }
      ]
    }
  ],
  "presets": [
    {
      "name": "How Splash Works",
      "blocks": [
        {
          "type": "option_card",
          "settings": {
            "card_style": "default",
            "icon_type": "wine-bottles",
            "card_text": "With plenty of options, expertly selected, our curated cases are perfect for exploring new wines.",
            "link_text": "Shop Curated Cases",
            "link_url": "/collections/curated-cases"
          }
        },
        {
          "type": "option_card",
          "settings": {
            "card_style": "highlighted",
            "icon_type": "box",
            "card_text": "Know what you like? Start from scratch and build your own 15-bottle case, bottle by bottle.",
            "link_text": "Build Your Own Case",
            "link_url": "/pages/build-case"
          }
        },
        {
          "type": "wine_club",
          "settings": {
            "club_heading": "Join Our Wine Club",
            "club_description": "At Splash, subscribing to regular shipments is a benefit - you get consistently great prices and you are totally in control. As an added bonus, if you subscribe today, you'll get $20 off your first shipment - just use the code SUBSCRIBE at checkout! That means you that can get 15 bottles for just $69 + FREE Shipping - our best ever price!",
            "button_text": "Learn More",
            "button_url": "/pages/wine-club"
          }
        }
      ]
    }
  ]
}
{% endschema %}
